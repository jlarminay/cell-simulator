var stop=!1,debug={grid:!1,arrows:!1,points:!1,selfTakeOver:!1,fillBoard:!1,cellSquare:!0,randomSpawn:!0,voice:!1,victoryType:"control"};default_clan={health:1,attack:1,defence:0,evasion:1,lifeloss:0,speed:1};var clans=[{name:"Red Bois",color:"red",health:default_clan.health,attack:default_clan.attack,defence:default_clan.defence,evasion:default_clan.evasion,lifeloss:default_clan.lifeloss,speed:default_clan.speed,time:null},{name:"Hydro Homies",color:"blue",health:default_clan.health,attack:default_clan.attack,defence:default_clan.defence,evasion:default_clan.evasion,lifeloss:default_clan.lifeloss,speed:default_clan.speed,time:null},{name:"Plant Army",color:"green",health:default_clan.health,attack:default_clan.attack,defence:default_clan.defence,evasion:default_clan.evasion,lifeloss:default_clan.lifeloss,speed:default_clan.speed,time:null},{name:"The Dutch",color:"orange",health:default_clan.health,attack:default_clan.attack,defence:default_clan.defence,evasion:default_clan.evasion,lifeloss:default_clan.lifeloss,speed:default_clan.speed,time:null}],clanCount=0,countdown=!1,mutation_dif=0,voiceCommands={defeated:[" have been defeated."," have been eliminated."," are no longer in the game."," have been destroyed."]},size=50,width,height,maxCells=0,time_s,time_n,ms,time_end=null,time_last=null,turn_cur=0,turn_end=0,updateSpeed=1,mostClan="",mostVal=0,limit_time=0,limit_turn=0,map=null,map_data;function GET(name){return!!(results=new RegExp("[?&]"+name+"=([^&#]*)").exec(window.location.href))&&results[1]}function randomBetween(min,max){return Math.floor(Math.random()*(+max-+min))+ +min}function getTime(math=null){return time_n=null==math?(new Date).getTime():math,ms=time_n-time_s}function convertTime(ms){var d,h,m,s;return s=Math.floor(ms/1e3),m=Math.floor(s/60),s%=60,h=Math.floor(m/60),m%=60,d=Math.floor(h/24),h%=24,nh=String("00"+h).slice(-2),nm=String("00"+m).slice(-2),ns=String("00"+s).slice(-2),nt=String("000"+ms).slice(-3),end_time=nh+":"+nm+":"+ns+"."+nt,end_time}function countAll(){var string="",arr=[],alive=0,orClan;$.each(clans,function(index,val){var count=0;$('[clan="'+val.name+'"]').each(function(){count++}),0==count&&null==clans[index].time&&(isNaN(getTime())?clans[index].time=0:(tmp=parseInt(getTime()),clans[index].time=tmp,time_last=tmp,readVoice(val.name+" have been defeated!"))),count>=maxCells&&decideWinner(val),count>0&&alive++,arr.push({name:val.name,color:val.color,count:count,time:clans[index].time})}),arr.sort(function(a,b){return a.time>b.time?-1:b.time>a.time?1:0}),arr.sort(function(a,b){return a.count>b.count?-1:b.count>a.count?1:0}),string+="<table border style='margin:auto;width:100%;'>","last"==debug.victoryType&&1==alive&&decideWinner(arr[0]),$.each(arr,function(index,val){null==val.time?val.time="Running":val.time=convertTime(val.time),string+="<tr>",string+="<td style='background-color:"+colourNameToHex(val.color)+"'></td>",string+="<td>"+(index+1)+"</td>",string+="<td style='text-shadow:0 0 10px white,0 0 5px white;'>"+val.name+"</td>",string+="<td>"+val.count+"</td>",string+="<td>"+val.time+"</td>",string+="<td>"+(val.count/maxCells*100).toFixed(2)+"%</td>",string+="<td style='background-color:"+colourNameToHex(val.color)+"'></td>",string+="</tr>"}),string+="</table>",$(".show_count").html(string),$("#favicon").attr("clan")!=mostClan&&($("#favicon").attr("clan",mostClan),$("#favicon").attr("href","imager.php?col="+colourNameToHex(mostClan))),mostClan="",mostVal=0,tmp_time=convertTime(getTime()),tmp_time+=0!=limit_time?"/"+convertTime(parseInt(limit_time+"000")):"",tmp_turn=turn_cur,tmp_turn+=0!=limit_turn?" / "+limit_turn:"",$(".time").html("<b>"+tmp_time+"</b>"),$(".turn").html("<b>"+tmp_turn+"</b>")}function decideWinner(val){stop=!0,stopMachine(),top_count=0,top_team=null,$.each(clans,function(index,val){var count=0;$('[clan="'+val.name+'"]').each(function(){count++}),count>top_count&&(top_count=count,top_team=val)}),time_end=getTime((new Date).getTime()),$(".score-holder").hide(),$("#Modal_team").modal("hide"),$("#Modal_sett").modal("hide"),tmp_turn=turn_cur,tmp_turn+=0!=limit_turn?"/"+limit_turn:"",tmp_time=convertTime(time_end),tmp_time+=0!=limit_time?"/"+convertTime(parseInt(limit_time+"000")):"",readVoice(top_team.name+" are the winners!"),$("#Modal_won #trophy").css("color",top_team.color),$("#Modal_won #team").text(top_team.name),$("#Modal_won #time").html("<b>"+tmp_time+"</b>"),$("#Modal_won #turn").html("<b>"+tmp_turn+"</b>"),$("#Modal_won").modal({backdrop:"static",keyboard:!1})}function pickPos(){for(var tmp=!1,trys=0;!tmp;){var x,y,pos=Math.floor(Math.random()*width)+"-"+Math.floor(Math.random()*height);null==$("#"+pos).attr("state")&&(null==$("#"+pos).attr("clan")?tmp=!0:trys++),trys>=10&&(tmp=!0)}return pos}function checkMove(x,y,clan){var f=Math.floor,move=!1,Tx=0,Ty=0,cur=0;return Tx=f(x)-1,Ty=f(y)-1,$("#"+Tx+"-"+Ty).attr("clan")!=clan&&(move=!0),Tx=f(x)-1,Ty=f(y),$("#"+Tx+"-"+Ty).attr("clan")!=clan&&(move=!0),Tx=f(x)-1,Ty=f(y)+1,$("#"+Tx+"-"+Ty).attr("clan")!=clan&&(move=!0),Tx=f(x),Ty=f(y)-1,$("#"+Tx+"-"+Ty).attr("clan")!=clan&&(move=!0),Tx=f(x),Ty=f(y)+1,$("#"+Tx+"-"+Ty).attr("clan")!=clan&&(move=!0),Tx=f(x)+1,Ty=f(y)-1,$("#"+Tx+"-"+Ty).attr("clan")!=clan&&(move=!0),Tx=f(x)+1,Ty=f(y),$("#"+Tx+"-"+Ty).attr("clan")!=clan&&(move=!0),Tx=f(x)+1,Ty=f(y)+1,$("#"+Tx+"-"+Ty).attr("clan")!=clan&&(move=!0),move}function takeOver(newPos,clan,org_col){if(0!=mutation_dif){mut_half=mutation_dif/2;var col=colourNameToHex(clan.color),r=parseInt(col.slice(0,2),16),g=parseInt(col.slice(2,4),16),b=parseInt(col.slice(4,6),16);(r+=Math.floor(Math.random()*(mut_half- -mut_half)-mut_half))<=10&&(r=10),(g+=Math.floor(Math.random()*(mut_half- -mut_half)-mut_half))<=10&&(g=10),(b+=Math.floor(Math.random()*(mut_half- -mut_half)-mut_half))<=10&&(b=10),r>=245&&(r=245),g>=245&&(g=245),b>=245&&(b=245),tar=$("#"+newPos),tar.css("background-color","rgb("+r+","+g+","+b+")"),tar.attr("clan",clan.name),tar.attr("health",clan.health),tar.attr("attack",clan.attack),tar.attr("evasion",clan.evasion),tar.attr("defence",clan.defence),tar.attr("lifeloss",clan.lifeloss),tar.attr("speed",clan.speed)}else tar=$("#"+newPos),tar.css("background-color",clan.color),tar.attr("clan",clan.name),tar.attr("health",clan.health),tar.attr("attack",clan.attack),tar.attr("evasion",clan.evasion),tar.attr("defence",clan.defence),tar.attr("lifeloss",clan.lifeloss),tar.attr("speed",clan.speed)}function moveDirection(org_x,org_y,new_x,new_y){return dir="",new_y>org_y&&(dir+="bottom "),new_y<org_y&&(dir+="top "),new_x>org_x&&(dir+="right "),new_x<org_x&&(dir+="left "),dir=dir.trim(),dir=dir.replace(" ","-"),""==dir&&(dir="none"),dir}function moveClan(count){clan=clans[count];var tmpVal=0;null==clan[time]&&$('[clan="'+clan.name+'"]').each(function(){tmpVal++;var curPos,pos=$(this).attr("id").split("-"),x=pos[0],y=pos[1],move=!0;me=$("#"+x+"-"+y),me.attr("class","box");var cur_heal=me.attr("health");if((cur_heal-=me.attr("lifeloss"))<=0)me.css("background-color","white"),me.attr("clan","");else{me.attr("health",cur_heal);var sped=me.attr("speed"),new_sped=2+parseInt(sped),xDif=sped-Math.floor(Math.random()*new_sped),yDif=sped-Math.floor(Math.random()*new_sped);nx=x-xDif,ny=y-yDif,ny>=height&&(ny=height-1),nx>=width&&(nx=width-1),nx<=0&&(nx=0),ny<=0&&(ny=0);var newPos=nx+"-"+ny;if(debug.arrows&&(arrow=moveDirection(x,y,nx,ny),me.addClass(arrow)),tar=$("#"+newPos),null!=tar.attr("state"))state=tar.attr("state"),"wall-down"==state&&moveDirection(x,y,nx,ny).indexOf("bottom")>=0?takeOver(newPos,clan,me.css("background-color")):"wall-up"==state&&moveDirection(x,y,nx,ny).indexOf("top")>=0?takeOver(newPos,clan,me.css("background-color")):"wall-right"==state&&moveDirection(x,y,nx,ny).indexOf("right")>=0?takeOver(newPos,clan,me.css("background-color")):"wall-left"==state&&moveDirection(x,y,nx,ny).indexOf("left")>=0&&takeOver(newPos,clan,me.css("background-color"));else if(""==tar.attr("clan"))takeOver(newPos,clan,me.css("background-color"));else if(tar.attr("clan")==me.attr("clan"))debug.selfTakeOver&&takeOver(newPos,clan,me.css("background-color"));else{var ene_heal=tar.attr("health"),ene_def=tar.attr("defence"),my_atck=me.attr("attack");tmp_atck=randomBetween(1,my_atck),tmp_def=randomBetween(1,ene_def),tmp_heal=ene_heal-Math.max(0,tmp_atck-tmp_def),tmp_heal=ene_heal-tmp_atck,tmp_heal<=0?takeOver(newPos,clan,me.css("background-color")):tar.attr("health",tmp_heal)}}}),tmpVal>mostVal&&(mostVal=tmpVal,mostClan=clan.color)}function randomHexColor(){return("000000"+Math.floor(16777215*Math.random()).toString(16)).slice(-6)}function colourNameToHex(colour){var colours={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4","indianred ":"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},re,tmp,tmp;return colour=String(colour),/[0-9A-Fa-f]{6}/g.test(colour)?tmp=colour.toLowerCase():void 0!==colours[colour.toLowerCase()]?tmp=colours[colour.toLowerCase()]:colour}function countDown(){countdown||(countdown=!0,tim=1.5,setTimeout(function(){readVoice("3",tim),$("#text-holder").html("3")},1e3),setTimeout(function(){readVoice("2",tim),$("#text-holder").html("2")},2e3),setTimeout(function(){readVoice("1",tim),$("#text-holder").html("1")},3e3),setTimeout(function(){readVoice("Start",tim),$("#text-holder").html("START")},4e3))}function stopMachine(){clearInterval(timer),clearInterval(updater)}function runMachine(){stop?stopMachine():(countDown(),setTimeout(function(){time_s=(new Date).getTime(),$(".center").hide(),timer=setInterval(function(){moveClan(clanCount),"time"==debug.victoryType&&parseInt(limit_time+"000")<=getTime()&&(time_end=parseInt(limit_time+"000"),decideWinner(clans[clanCount])),"turn"==debug.victoryType&&limit_turn<=turn_cur&&decideWinner(clans[clanCount]),++clanCount>=clans.length&&(clanCount=0,turn_cur++)},updateSpeed),updater=setInterval(function(){countAll()},1)},4500))}function readMap(){null!=map?($(".con_team").hide(),$(".con_sett").hide(),map=decodeURI(map),map=JSON.parse(map),clans=map.clans,size=map.size,updateSpeed=map.speed,map_data=map.map,limit_time=map.limit_time,limit_turn=map.limit_turn,debug.cellSquare=map.cellSquare,debug.randomSpawn=map.randomSpawn,debug.victoryType=map.victoryType,initMap()):initMap()}function makeMap(){null!=map&&(i=0,$.each(map_data,function(row_i,row){$.each(row,function(cell_i,cell){pp=cell_i+"-"+row_i,"w"==cell?($("#"+pp).css("background-color","black").attr("state","wall"),maxCells--):"^"==cell?$("#"+pp).attr("state","wall-up"):">"==cell?$("#"+pp).attr("state","wall-right"):"v"==cell?$("#"+pp).attr("state","wall-down"):"<"==cell?$("#"+pp).attr("state","wall-left"):(Number(cell)||"0"==cell)&&(i++,takeOver(pp,clans[cell],clans[cell].color))})}),0==i&&(debug.randomSpawn=!0))}function initMap(){debug.cellSquare?(width=Math.floor($(window).width()/size),height=Math.floor($(window).height()/size)):(size=size.indexOf("x")>=0?size.split("x"):[size,size],width=parseInt(size[0]),height=parseInt(size[1])),maxCells=width*height;var i=0,x=0,y=0;if(debug.fillBoard)init=setInterval(function(){i<maxCells?(arrow="<img src='media/arrow.png'>",point="<span>"+x+"-"+y+"</span>",$(".main-container").append("<div clan='' class='box none' id='"+x+"-"+y+"' style='background-color:white;width:"+100/width+"%;height:"+100/height+"%'>"+point+arrow+"</div>"),++x>=width&&(y++,x=0),i++):(makeMap(),debug.randomSpawn&&$.each(clans,function(index,val){var pos;takeOver(pickPos(),val,val.color)}),countAll(),clearInterval(init),runMachine())},1);else{for(;i<width*height;)arrow="<img src='media/arrow.png'>",point="<span>"+x+"-"+y+"</span>",$(".main-container").append("<div clan='' class='box none' id='"+x+"-"+y+"' style='background-color:white;width:"+100/width+"%;height:"+100/height+"%'>"+point+arrow+"</div>"),++x>=width&&(y++,x=0),i++;makeMap(),debug.randomSpawn&&$.each(clans,function(index,val){var pos;takeOver(pickPos(),val,val.color)}),countAll(),runMachine()}}function fillData(){$(".cell_size").val(size),$(".game_speed").val(updateSpeed),$(".col_mutation").val(mutation_dif),$(".limit_time").val(limit_time),$(".limit_turn").val(limit_turn),string="<table style='width:100%;'>",string+="<tr>",string+="<th style='border:0;'></th>",string+="<th>Team Name</th>",string+="<th>Color <abbr title='This can be a color or hex code (no #). For random color put {random}.'>?</abbr></th>",string+="<th>Health <abbr title='Higher the number, the more damage they can take. Min 0.'>?</abbr></th>",string+="<th>Attack <abbr title='Higher the number, the more damage they deal. Min 1.'>?</abbr></th>",string+="<th>Defence <abbr title='Higher the number, the less damage they take. Min 1 Max 90.'>?</abbr></th>",string+="<th>Evasion <abbr title='Higher the number, the higher change to dodge and attack. Min 0 Max 90.'>?</abbr></th>",string+="<th>Lifeloss <abbr title='How much damage they take each turn. Can be a decimal. If negative, they gain health each turn.'>?</abbr></th>",string+="<th class='h'>Speed</th>",string+="</tr>",$.each(clans,function(index,val){string+="<tr class='team-controls'>",string+="<td><div class='btn btn-danger rem-team' title='Remove Team'><i class='fas fa-minus'></i></div></td>",string+="<td data-title='name' contenteditable>"+val.name+"</td>",string+="<td data-title='color' contenteditable>"+val.color+"</td>",string+="<td data-title='health' contenteditable>"+val.health+"</td>",string+="<td data-title='attack' contenteditable>"+val.attack+"</td>",string+="<td data-title='defence' contenteditable>"+val.defence+"</td>",string+="<td data-title='evasion' contenteditable>"+val.evasion+"</td>",string+="<td data-title='lifeloss' contenteditable>"+val.lifeloss+"</td>",string+="<td class='h' data-title='speed' contenteditable>"+val.speed+"</td>",string+="</tr>"}),string+="</table>",$(".cell-control").html(string)}function updateDebug(){debug.grid?($(".box").css("-webkit-box-sizing","border-box"),$(".box").css("-moz-box-sizing","border-box"),$(".box").css("box-sizing","border-box"),$(".box").css("border","1px solid white")):$(".box").css("border","0px"),debug.arrows?$(".box img").show():$(".box img").hide(),debug.points?$(".box span").show():$(".box span").hide()}function readVoice(string,rate=1){if(debug.voice){var available_voices=window.speechSynthesis.getVoices(),english_voice="";if(""===(english_voice=available_voices[0])){for(var i=0;i<available_voices.length;i++)if("en-US"===available_voices[i].lang){english_voice=available_voices[i];break}""===english_voice&&(english_voice=available_voices[0])}utter=new SpeechSynthesisUtterance,utter.rate=rate,utter.pitch=.5,utter.text=string,utter.voice=english_voice,utter.onend=function(){},window.speechSynthesis.speak(utter),voiceCommands.num=voiceCommands.num+1}}$(function(){0!=GET("map")?map=GET("map"):(0!=GET("c")&&(size=GET("c")),toString(size).indexOf("x")>=0&&(debug.cellSquare=!1),0!=GET("s")&&(updateSpeed=GET("s")),0!=GET("m")&&(mutation_dif=GET("m")),0!=GET("ltime")&&(limit_time=GET("ltime")),0!=GET("lturn")&&(limit_turn=GET("lturn")),0!=GET("t")&&(clans=JSON.parse(decodeURI(GET("t")))),clans=clans.filter(function(item){return/\S/.test(item.name)}),$.each(clans,function(index,val){"{random}"==val.color&&(clans[index].color=randomHexColor())})),readMap(),fillData(),$(".con_play").click(function(){$(".con_play").toggle(),stop=!stop,runMachine()}),$(".con_rest").click(function(){location.reload()}),$(".con_sett").click(function(){$("#Modal_sett").modal("show")}),$(".con_debug").click(function(){$("#Modal_debug").modal("show")}),$(".con_team").click(function(){$("#Modal_team").modal("show")}),$(".con_list, .score-holder .close").click(function(){$(".score-holder").slideToggle()}),$(document).on("click",".rem-team",function(){$(this).parents(".team-controls").remove()}),$(".add-team").click(function(){string="",string+="<tr class='team-controls'>",string+="<td><div class='btn btn-danger rem-team' title='Remove Team'><i class='fas fa-minus'></i></div></td>",string+="<td data-title='name' contenteditable></td>",string+="<td data-title='color' contenteditable></td>",string+="<td data-title='health' contenteditable>"+default_clan.health+"</td>",string+="<td data-title='attack' contenteditable>"+default_clan.attack+"</td>",string+="<td data-title='defence' contenteditable>"+default_clan.defence+"</td>",string+="<td data-title='evasion' contenteditable>"+default_clan.evasion+"</td>",string+="<td data-title='lifeloss' contenteditable>"+default_clan.lifeloss+"</td>",string+="<td class='h' data-title='speed' contenteditable>"+default_clan.speed+"</td>",string+="</tr>",$(".team-controls:last").after(string)}),$(".con_reset").click(function(){window.location.href="?"}),$(".con_maker").click(function(){window.location.href="maker.html"}),$(".save").click(function(){c=$(".cell_size").val(),s=$(".game_speed").val(),m=$(".col_mutation").val(),ltime=$(".limit_time").val(),lturn=$(".limit_turn").val(),tmp_clans=[],i=0,$(".team-controls").each(function(){tmp_clans[i]={name:$(this).find("[data-title=name]").text(),color:$(this).find("[data-title=color]").text(),health:$(this).find("[data-title=health]").text(),attack:$(this).find("[data-title=attack]").text(),defence:$(this).find("[data-title=defence]").text(),evasion:$(this).find("[data-title=evasion]").text(),lifeloss:$(this).find("[data-title=lifeloss]").text(),speed:$(this).find("[data-title=speed]").text(),time:null},i++}),t=encodeURI(JSON.stringify(tmp_clans)),window.location.href="?c="+c+"&s="+s+"&m="+m+"&ltime="+ltime+"&lturn="+lturn+"&t="+t}),$(".score-holder").draggable(),$(".debug-grid").click(function(){debug.grid=!debug.grid,updateDebug()}),$(".debug-arrows").click(function(){debug.arrows=!debug.arrows,updateDebug()}),$(".debug-points").click(function(){debug.points=!debug.points,updateDebug()}),$(".debug-voice").click(function(){debug.voice=!debug.voice,updateDebug()}),$(".test-voice").click(function(){debug.voice=!0,readVoice("This is a voice test"),debug.voice=!1})});